# UI/フロントエンドデザインスキル

このスキルは、日本のデジタル庁デザインシステムβ版に準拠したUI/フロントエンドデザインを実装するためのガイドラインを提供します。

**参照**: https://design.digital.go.jp/

## 基本理念

「誰一人取り残されない、人に優しいデジタル化を」

すべてのUI実装において、ユーザビリティとアクセシビリティを最優先に設計・実装してください。

---

## 1. 余白（スペーシング）

### 基準単位

**8 CSS px** を基準単位として使用します。

### スペーシングスケール

| トークン名 | 値 | 用途 |
|-----------|-----|------|
| `spacing-1` | 8px | 最小の余白、アイコンとテキストの間隔 |
| `spacing-2` | 16px | 関連要素間の余白 |
| `spacing-3` | 24px | セクション内の要素間 |
| `spacing-4` | 32px | カード内のパディング |
| `spacing-5` | 40px | セクション間の余白 |
| `spacing-6` | 48px | 大きなセクション間 |
| `spacing-8` | 64px | ページセクション間 |

### 余白の使い分け原則

1. **階層構造の表現**
   - 重要な要素には大きな間隔
   - 重要度が低い要素には小さな間隔

2. **関連性の示唆**
   - 関連性の高い要素：小さな余白で視覚的に結びつける
   - 関連性の低い要素：大きな余白で分離

3. **一貫性**
   - プロジェクト全体で3〜5種類のスケールを定義し、一貫して使用

```css
/* CSS変数での定義例 */
:root {
  --spacing-1: 0.5rem;   /* 8px */
  --spacing-2: 1rem;     /* 16px */
  --spacing-3: 1.5rem;   /* 24px */
  --spacing-4: 2rem;     /* 32px */
  --spacing-5: 2.5rem;   /* 40px */
  --spacing-6: 3rem;     /* 48px */
  --spacing-8: 4rem;     /* 64px */
}
```

---

## 2. 角丸（Border Radius）

### 基準単位

スペーシングと同様に **4px** を基準単位として使用します。

### 角丸スケール

| トークン名 | 値 | 用途 |
|-----------|-----|------|
| `radius-none` | 0px | 角丸なし（シャープな印象） |
| `radius-sm` | 4px | 小さな要素（チップ、バッジ） |
| `radius-md` | 8px | 標準的なUI要素（ボタン、入力欄） |
| `radius-lg` | 16px | カード、モーダル |
| `radius-xl` | 24px | 大きなコンテナ、特徴的なセクション |
| `radius-full` | 9999px | 完全な丸（アバター、丸ボタン） |

### 角丸の使い分け原則

1. **一貫性を保つ**
   - 同じ種類のコンポーネントには同じ角丸を適用
   - ボタンは常に `radius-md`、カードは常に `radius-lg` など

2. **階層を表現**
   - 親要素より子要素の角丸を小さくする
   - 例: カード（16px）内のボタン（8px）

3. **インタラクティブ要素の視認性**
   - クリッカブルな要素には適度な角丸で親しみやすさを演出
   - 角丸が大きすぎると押せる領域が不明確になるため注意

4. **ネストした角丸の計算**
   - 内側の角丸 = 外側の角丸 - パディング
   - 例: 外側16px、パディング8pxの場合、内側は8px

```css
/* CSS変数での定義例 */
:root {
  --radius-none: 0;
  --radius-sm: 0.25rem;   /* 4px */
  --radius-md: 0.5rem;    /* 8px */
  --radius-lg: 1rem;      /* 16px */
  --radius-xl: 1.5rem;    /* 24px */
  --radius-full: 9999px;
}

/* 使用例 */
.button {
  border-radius: var(--radius-md);
}

.card {
  border-radius: var(--radius-lg);
  padding: var(--spacing-2);
}

.card .button {
  /* 親の角丸(16px) - パディング(16px) = 0px だが、最低8pxを維持 */
  border-radius: var(--radius-md);
}

.avatar {
  border-radius: var(--radius-full);
}
```

---

## 3. カラーシステム

### カラーカテゴリ

#### プライマリカラー
- ブランドアイデンティティを確立
- ロゴ、ヘッダー、CTAボタンに使用
- **コントラスト比**: 背景色と最低 **4.5:1** を確保

#### セカンダリカラー
- プライマリカラーを補完
- 同じ色相で異なる明度を使用
- **コントラスト比**: 隣接要素と最低 **3:1**、テキスト使用時は **4.5:1**

#### ターシャリカラー
- セカンダリと同じ色相で逆の明度
- コントラスト要件はセカンダリと同様

#### コモンカラー（グレースケール）
- 中立的なグレーのスケール
- テキスト、ボーダー、UIコンポーネントに使用
- **テキスト**: 4.5:1のコントラスト必須
- **非テキスト要素（区切り線など）**: 3:1のコントラスト必須

### セマンティックカラー

| 意味 | 色 | 用途 |
|------|-----|------|
| 成功 | 緑系 | 完了メッセージ、成功状態 |
| エラー | 赤系 | エラーメッセージ、必須項目 |
| 警告 | 黄/オレンジ系 | 警告メッセージ、注意喚起 |
| 情報 | 青系 | お知らせ、ヒント |

#### セマンティックカラーのコントラスト比要件

> **重要**: セマンティックカラーは情報を伝える重要な役割を持つため、コントラスト比の確保は必須です。

| 用途 | 最低コントラスト比 | 備考 |
|------|-------------------|------|
| テキスト | **4.5:1** | エラーメッセージ、成功メッセージなど |
| アイコン | **4.5:1** | 状態を示すアイコン（チェックマーク、警告アイコンなど） |
| 背景色と前景色 | **4.5:1** | アラートバナーの背景とテキスト/アイコン |
| ボーダー・区切り線 | **3:1** | 入力欄のエラー状態のボーダーなど |

**注意点**:
- 黄色系の警告色は白背景でコントラストが取りにくいため、濃いオレンジや暗い黄色を使用
- 成功の緑も明るすぎる緑は避け、十分な暗さを確保
- 背景色として使用する場合は、その上に載るテキスト・アイコンとのコントラストを必ず確認

### リンクカラー
- **未訪問**: 青（伝統的なリンク色）
- **訪問済み**: 紫
- 色覚多様性に配慮し、彩度を調整

### コントラスト比の確認

```javascript
// コントラスト比の計算（WCAG準拠）
function getContrastRatio(color1, color2) {
  const l1 = getRelativeLuminance(color1);
  const l2 = getRelativeLuminance(color2);
  const lighter = Math.max(l1, l2);
  const darker = Math.min(l1, l2);
  return (lighter + 0.05) / (darker + 0.05);
}
```

---

## 4. タイポグラフィ

### フォントファミリー

```css
:root {
  --font-sans: "Noto Sans JP", sans-serif;
  --font-mono: "Noto Sans Mono", monospace;
}
```

### フォントウェイト

| トークン | 値 | 用途 |
|---------|-----|------|
| Normal (N) | 400 | 本文テキスト |
| Bold (B) | 700 | 見出し、強調 |

### フォントサイズ

| サイズ | 用途 | 注意 |
|--------|------|------|
| 48-64px | インパクトのあるビジュアル要素 | ヒーローセクションなど |
| 16-45px | 見出し・本文 | 16pxが標準最小サイズ |
| 14px | フッターなど制約のある領域 | これより小さいサイズは禁止 |

### 行間（Line Height）

| 値 | 用途 |
|-----|------|
| 100% | 単一行UIコンポーネント（ボタン） |
| 120-130% | 情報密度の高い画面（管理画面） |
| 140% | やや大きめの見出し |
| 150-160% | 標準的なWebの本文（150%が最小推奨） |
| 170-175% | 認知負荷を軽減した本文 |

### テキストスタイルのトークン命名規則

`[カテゴリ]-[サイズ][ウェイト]-[行間]`

例: `Std-17N-170` = Standard、17px、Normal、170%

### テキストスタイルカテゴリ

1. **Display (Dsp)**: 高インパクトなビジュアルメッセージ
2. **Standard (Std)**: 文書構造・見出し
3. **Dense (Dns)**: 情報密度の高いインターフェース
4. **Oneline (Oln)**: 単一行UI要素
5. **Mono**: コードコンテンツ

```css
/* タイポグラフィトークンの例 */
:root {
  /* Display */
  --text-dsp-48b-120: 700 3rem/1.2 var(--font-sans);

  /* Standard */
  --text-std-24b-140: 700 1.5rem/1.4 var(--font-sans);
  --text-std-17n-170: 400 1.0625rem/1.7 var(--font-sans);
  --text-std-16n-160: 400 1rem/1.6 var(--font-sans);

  /* Dense */
  --text-dns-14n-130: 400 0.875rem/1.3 var(--font-sans);

  /* Oneline */
  --text-oln-16n-100: 400 1rem/1 var(--font-sans);

  /* Mono */
  --text-mono-14n-150: 400 0.875rem/1.5 var(--font-mono);
}
```

---

## 5. アクセシビリティ（a11y）

### 準拠規格

- **WCAG 2.2**（最新版）
- **WCAG 2.1** / **WCAG 2.0**（JIS X 8341-3:2016互換）
- **WAI-ARIA 1.2 / 1.3**
- **ARIA Authoring Practices Guide (APG)**

### アイコンのコントラスト比について（重要）

> **極めて重要**: アイコンは「非テキストコンテンツ」として扱われることが多いですが、**意味を伝えるアイコンはテキストと同等のコントラスト比 4.5:1 を確保してください**。

#### なぜ4.5:1が必要か

WCAG 2.1では非テキスト要素（UIコンポーネントやグラフィックオブジェクト）に3:1を求めていますが、以下の理由からアイコンには4.5:1を推奨します：

1. **アイコンは情報伝達の主要手段になりうる**
   - 「成功」「エラー」「警告」などの状態表示
   - ナビゲーションの視覚的手がかり
   - アクションの意味を示すボタンアイコン

2. **テキストの代替として機能する場合がある**
   - アイコンのみのボタン（ハンバーガーメニュー、閉じるボタンなど）
   - テキストラベルの補助としてのアイコン

3. **低視力ユーザーへの配慮**
   - 小さなアイコンは認識しにくいため、より高いコントラストが必要

#### アイコンのコントラスト比ルール

| アイコンの種類 | 最低コントラスト比 | 例 |
|--------------|-------------------|-----|
| 意味を伝えるアイコン | **4.5:1** | 状態アイコン、ナビアイコン、アクションアイコン |
| 装飾的アイコン | 要件なし | 純粋に装飾目的のもの（ただし`aria-hidden="true"`を付与） |
| 大きなアイコン（24px以上） | **3:1** | ヒーローセクションの大きなアイコン |

```css
/* アイコンカラーの定義例 */
:root {
  /* 4.5:1以上を確保したアイコンカラー */
  --icon-primary: #1a1a1a;      /* 黒に近いグレー */
  --icon-success: #0d7a3e;      /* 暗めの緑 */
  --icon-error: #c41e3a;        /* 暗めの赤 */
  --icon-warning: #8b6914;      /* 暗めのオレンジ/黄色 */
  --icon-info: #0055a5;         /* 暗めの青 */
  --icon-disabled: #767676;     /* 4.5:1ギリギリのグレー */
}
```

### 必須チェック項目

#### 色とコントラスト
- [ ] テキストのコントラスト比 4.5:1 以上
- [ ] **意味を伝えるアイコンのコントラスト比 4.5:1 以上**
- [ ] 大きなテキスト（18pt以上または14pt太字以上）は 3:1 以上
- [ ] 非テキスト要素（ボーダー、区切り線など）のコントラスト比 3:1 以上
- [ ] 色だけで情報を伝えない（形状やテキストも併用）

#### キーボード操作
- [ ] すべての機能がキーボードで操作可能
- [ ] フォーカスインジケーターが視認可能
- [ ] フォーカス順序が論理的
- [ ] キーボードトラップがない

#### インタラクティブ要素
- [ ] タッチターゲットサイズ 44x44px 以上推奨
- [ ] クリック/タップ領域が十分な大きさ
- [ ] ホバー・フォーカス・アクティブ状態が明確

#### モーション
- [ ] `prefers-reduced-motion` を尊重
- [ ] 自動再生アニメーションに停止手段を提供
- [ ] 点滅コンテンツは3回/秒以下

#### レスポンシブデザイン
- [ ] 400%ズームでもコンテンツが利用可能
- [ ] 横スクロールなしで読める（320px幅まで）
- [ ] テキストリサイズに対応

### ARIA実装のベストプラクティス

```html
<!-- ボタン例 -->
<button type="button" aria-label="メニューを開く">
  <svg aria-hidden="true">...</svg>
</button>

<!-- モーダル例 -->
<div role="dialog" aria-modal="true" aria-labelledby="modal-title">
  <h2 id="modal-title">確認</h2>
  ...
</div>

<!-- ライブリージョン例 -->
<div role="status" aria-live="polite">
  保存しました
</div>
```

### reduced-motionの実装

```css
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
```

---

## 6. コンポーネント設計ガイドライン

### 主要コンポーネント

#### フォーム要素
- インプットテキスト、テキストエリア
- チェックボックス、ラジオボタン
- セレクトボックス、日付ピッカー
- ファイルアップロード

#### ナビゲーション
- グローバルメニュー、メガメニュー
- ボトムナビゲーション
- パンくずリスト
- ステップナビゲーション

#### 表示要素
- カード、テーブル、リスト
- アコーディオン、ディスクロージャー
- チップタグ

#### 通知・ダイアログ
- ノティフィケーションバナー
- 緊急時バナー
- モーダルダイアログ

### コンポーネント実装の原則

1. **セマンティックHTML優先**: 適切なHTML要素を使用し、ARIAは補助として使用
2. **プログレッシブエンハンスメント**: 基本機能はJSなしでも動作
3. **状態の明確化**: hover, focus, active, disabled状態を明確に
4. **エラーハンドリング**: エラー状態とメッセージを適切に表示

---

## 7. 実装チェックリスト

### 開発前
- [ ] デザイントークン（色、余白、タイポグラフィ）を定義
- [ ] アクセシビリティ要件を確認

### 開発中
- [ ] セマンティックHTMLを使用
- [ ] キーボードナビゲーションをテスト
- [ ] コントラスト比をチェック
- [ ] レスポンシブ対応を確認

### 開発後
- [ ] スクリーンリーダーでテスト
- [ ] axe-coreやLighthouseでアクセシビリティ監査
- [ ] 各ブラウザ・デバイスで動作確認

---

## 参考リンク

- [デジタル庁デザインシステム](https://design.digital.go.jp/)
- [WCAG 2.2](https://www.w3.org/TR/WCAG22/)
- [WAI-ARIA 1.2](https://www.w3.org/TR/wai-aria-1.2/)
- [ARIA Authoring Practices Guide](https://www.w3.org/WAI/ARIA/apg/)
